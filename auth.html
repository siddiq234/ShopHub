<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Account - ShopHub</title>
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <i class="bi bi-shop"></i> ShopHub
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="cart.html">
              <i class="bi bi-cart"></i> Cart
              <span id="cart-badge" class="badge bg-primary cart-badge">0</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="about.html">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="auth.html">Account</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-warning" href="admin.html">
              <i class="bi bi-shield-check"></i> Admin
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Auth Section -->
  <section class="py-5 auth-page-bg">
    <div class="container">
      <div class="row justify-content-center align-items-center g-5">
        <div class="col-lg-5 d-none d-lg-block">
          <div class="auth-illustration">
            <img src="https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=500&h=600&fit=crop" 
                 alt="Shopping" 
                 class="img-fluid rounded-4 shadow-lg mb-4">
          </div>
          <div class="mt-4">
            <div class="auth-feature">
              <div class="auth-feature-icon">
                <i class="bi bi-shield-check"></i>
              </div>
              <div>
                <h6 class="mb-0 fw-bold">Secure & Safe</h6>
                <small class="text-muted">Your data is protected</small>
              </div>
            </div>
            <div class="auth-feature">
              <div class="auth-feature-icon">
                <i class="bi bi-lightning-charge"></i>
              </div>
              <div>
                <h6 class="mb-0 fw-bold">Fast Checkout</h6>
                <small class="text-muted">Save time on every purchase</small>
              </div>
            </div>
            <div class="auth-feature">
              <div class="auth-feature-icon">
                <i class="bi bi-gift"></i>
              </div>
              <div>
                <h6 class="mb-0 fw-bold">Exclusive Deals</h6>
                <small class="text-muted">Members-only offers</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-5 col-md-8">
          <div class="card auth-card shadow">
            <div class="card-body">
              <!-- Toggle Buttons -->
              <div class="d-flex mb-4 p-1 bg-light rounded-pill">
                <button class="btn btn-primary flex-fill rounded-pill" id="login-tab" onclick="switchToLogin()">
                  <i class="bi bi-box-arrow-in-right"></i> Login
                </button>
                <button class="btn btn-outline-primary flex-fill rounded-pill" id="signup-tab" onclick="switchToSignup()">
                  <i class="bi bi-person-plus"></i> Sign Up
                </button>
              </div>

              <!-- Dynamic Header -->
              <div class="text-center mb-4">
                <h2 id="auth-title">
                  <i class="bi bi-person-circle"></i> Welcome Back
                </h2>
                <p id="auth-subtitle" class="text-muted">Login to your account to continue shopping</p>
              </div>
              
              <!-- Success Message -->
              <div id="success-message" class="success-message mb-3" style="display: none;">
                <i class="bi bi-check-circle"></i> <span id="success-text">Login successful!</span>
              </div>

              <!-- Auth Form -->
              <form id="auth-form" novalidate>
                <!-- Name Field (Hidden for Login) -->
                <div class="mb-3" id="name-field" style="display: none;">
                  <label for="name" class="form-label">Full Name</label>
                  <input type="text" 
                         class="form-control" 
                         id="name" 
                         name="name"
                         placeholder="Enter your full name">
                  <div class="error-message" id="name-error"></div>
                </div>

                <!-- Email -->
                <div class="mb-3">
                  <label for="email" class="form-label">Email Address</label>
                  <input type="email" 
                         class="form-control" 
                         id="email" 
                         name="email"
                         placeholder="Enter your email"
                         required>
                  <div class="error-message" id="email-error"></div>
                </div>

                <!-- Password -->
                <div class="mb-3">
                  <label for="password" class="form-label">Password</label>
                  <div class="input-group">
                    <input type="password" 
                           class="form-control" 
                           id="password" 
                           name="password"
                           placeholder="Enter your password"
                           required>
                    <button class="btn btn-outline-secondary password-toggle" 
                            type="button" 
                            id="toggle-password">
                      <i class="bi bi-eye"></i>
                    </button>
                  </div>
                  <small id="password-help" class="text-muted" style="display: none;">Password must be at least 6 characters</small>
                  <div class="error-message" id="password-error"></div>
                </div>

                <!-- Remember Me / Terms -->
                <div class="mb-3 form-check">
                  <input type="checkbox" class="form-check-input" id="checkbox-field">
                  <label class="form-check-label" for="checkbox-field" id="checkbox-label">
                    Remember me
                  </label>
                  <div class="error-message" id="checkbox-error"></div>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary w-100 mb-3" id="submit-btn">
                  <i class="bi bi-box-arrow-in-right"></i> <span id="submit-text">Login</span>
                </button>

                <!-- Divider -->
                <div class="text-center my-3">
                  <span class="text-muted">or continue with</span>
                </div>

                <!-- Social Login Buttons -->
                <div class="d-grid gap-2 mb-3">
                  <button type="button" class="btn btn-outline-danger" id="google-login">
                    <i class="bi bi-google"></i> <span id="google-text">Login with Google</span>
                  </button>
                  <button type="button" class="btn btn-outline-primary" id="facebook-login">
                    <i class="bi bi-facebook"></i> <span id="facebook-text">Login with Facebook</span>
                  </button>
                </div>
                
                <!-- Admin Access -->
                <div class="text-center mt-4">
                  <hr>
                  <small class="text-muted">Administrator?</small><br>
                  <a href="admin.html" class="btn btn-outline-warning btn-sm mt-2">
                    <i class="bi bi-shield-check"></i> Admin Panel
                  </a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-4 col-md-6">
          <h5><i class="bi bi-shop"></i> ShopHub</h5>
          <p class="text-white-50">Your trusted destination for quality tech products and exceptional service. Shop with confidence.</p>
          <div class="social-links mt-3">
            <a href="#"><i class="bi bi-facebook"></i></a>
            <a href="#"><i class="bi bi-twitter"></i></a>
            <a href="#"><i class="bi bi-instagram"></i></a>
            <a href="#"><i class="bi bi-linkedin"></i></a>
          </div>
        </div>
        <div class="col-lg-2 col-md-6">
          <h5>Shop</h5>
          <a href="index.html">All Products</a>
          <a href="index.html">New Arrivals</a>
          <a href="index.html">Best Sellers</a>
          <a href="index.html">Special Offers</a>
        </div>
        <div class="col-lg-2 col-md-6">
          <h5>Company</h5>
          <a href="about.html">About Us</a>
          <a href="about.html">Contact</a>
          <a href="#">Careers</a>
          <a href="#">Press</a>
        </div>
        <div class="col-lg-2 col-md-6">
          <h5>Support</h5>
          <a href="#">Help Center</a>
          <a href="#">Shipping Info</a>
          <a href="#">Returns</a>
          <a href="#">Track Order</a>
        </div>
        <div class="col-lg-2 col-md-6">
          <h5>Legal</h5>
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Cookie Policy</a>
          <a href="#">Disclaimer</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p class="mb-0">&copy; 2026 ShopHub. All rights reserved. Made with <i class="bi bi-heart-fill text-danger"></i> by Siddique Ijaz.</p>
      </div>
    </div>
  </footer>

  <!-- Animations JS -->
  <script src="js/animations.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Admin Utils JS -->
  <script src="js/admin-utils.js"></script>
  <!-- Cart JS -->
  <script src="js/cart.js"></script>
  
  <script>
    let isLoginMode = true;

    function switchToLogin() {
      isLoginMode = true;
      
      // Update buttons
      document.getElementById('login-tab').className = 'btn btn-primary flex-fill rounded-pill';
      document.getElementById('signup-tab').className = 'btn btn-outline-primary flex-fill rounded-pill';
      
      // Update content
      document.getElementById('auth-title').innerHTML = '<i class="bi bi-person-circle"></i> Welcome Back';
      document.getElementById('auth-subtitle').textContent = 'Login to your account to continue shopping';
      document.getElementById('submit-text').textContent = 'Login';
      document.getElementById('google-text').textContent = 'Login with Google';
      document.getElementById('facebook-text').textContent = 'Login with Facebook';
      document.getElementById('success-text').textContent = 'Login successful!';
      
      // Update form
      document.getElementById('name-field').style.display = 'none';
      document.getElementById('password-help').style.display = 'none';
      document.getElementById('checkbox-label').textContent = 'Remember me';
      document.getElementById('checkbox-field').required = false;
      document.getElementById('name').required = false;
      
      // Update submit button icon
      document.querySelector('#submit-btn i').className = 'bi bi-box-arrow-in-right';
      
      // Clear form
      document.getElementById('auth-form').reset();
      clearErrors();
    }

    function switchToSignup() {
      isLoginMode = false;
      
      // Update buttons
      document.getElementById('login-tab').className = 'btn btn-outline-primary flex-fill rounded-pill';
      document.getElementById('signup-tab').className = 'btn btn-primary flex-fill rounded-pill';
      
      // Update content
      document.getElementById('auth-title').innerHTML = '<i class="bi bi-person-plus"></i> Create Account';
      document.getElementById('auth-subtitle').textContent = 'Join ShopHub and start shopping today';
      document.getElementById('submit-text').textContent = 'Create Account';
      document.getElementById('google-text').textContent = 'Sign up with Google';
      document.getElementById('facebook-text').textContent = 'Sign up with Facebook';
      document.getElementById('success-text').textContent = 'Account created successfully!';
      
      // Update form
      document.getElementById('name-field').style.display = 'block';
      document.getElementById('password-help').style.display = 'block';
      document.getElementById('checkbox-label').textContent = 'I agree to the Terms and Conditions';
      document.getElementById('checkbox-field').required = true;
      document.getElementById('name').required = true;
      
      // Update submit button icon
      document.querySelector('#submit-btn i').className = 'bi bi-person-check';
      
      // Clear form
      document.getElementById('auth-form').reset();
      clearErrors();
    }

    function clearErrors() {
      const errorElements = document.querySelectorAll('.error-message');
      errorElements.forEach(el => el.textContent = '');
      
      const formControls = document.querySelectorAll('.form-control, .form-check-input');
      formControls.forEach(el => el.classList.remove('is-invalid'));
    }

    // Form validation functions
    function isValidEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    function showError(fieldName, message) {
      const errorElement = document.getElementById(`${fieldName}-error`);
      const inputElement = document.getElementById(fieldName) || document.getElementById('checkbox-field');

      if (errorElement) {
        errorElement.textContent = message;
      }

      if (inputElement) {
        inputElement.classList.add('is-invalid');
      }
    }

    function validateForm(formData, formType) {
      const errors = {};
      let isValid = true;

      // Validate name (signup only)
      if (formType === 'signup') {
        const name = formData.get('name');
        if (!name || name.trim() === '') {
          errors.name = 'Name is required';
          isValid = false;
        }
      }

      // Validate email
      const email = formData.get('email');
      if (!email || email.trim() === '') {
        errors.email = 'Email is required';
        isValid = false;
      } else if (!isValidEmail(email)) {
        errors.email = 'Please enter a valid email address';
        isValid = false;
      }

      // Validate password
      const password = formData.get('password');
      if (!password || password.trim() === '') {
        errors.password = 'Password is required';
        isValid = false;
      } else if (password.length < 6) {
        errors.password = 'Password must be at least 6 characters';
        isValid = false;
      }

      // Validate terms checkbox (signup only)
      if (formType === 'signup') {
        const terms = document.getElementById('checkbox-field').checked;
        if (!terms) {
          errors.checkbox = 'You must agree to the Terms and Conditions';
          isValid = false;
        }
      }

      return { isValid, errors };
    }

    // Handle form submission
    async function handleAuthSubmit(event) {
      event.preventDefault();
      clearErrors();

      const form = event.target;
      const formData = new FormData(form);
      const submitBtn = form.querySelector('button[type="submit"]');
      const formType = isLoginMode ? 'login' : 'signup';

      // Validate form
      const validation = validateForm(formData, formType);

      if (!validation.isValid) {
        // Display errors
        Object.keys(validation.errors).forEach(field => {
          showError(field, validation.errors[field]);
        });
        return;
      }

      // Show success message for demo (since backend might not be running)
      document.getElementById('success-message').style.display = 'block';
      
      // Simulate success
      setTimeout(() => {
        alert(`${isLoginMode ? 'Login' : 'Signup'} successful! (Demo mode - no backend connected)`);
        // In real app, redirect to index.html
        // window.location.href = 'index.html';
      }, 1000);
    }

    // Password toggle
    function togglePasswordVisibility() {
      const passwordInput = document.getElementById('password');
      const icon = document.querySelector('#toggle-password i');

      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        icon.classList.remove('bi-eye');
        icon.classList.add('bi-eye-slash');
      } else {
        passwordInput.type = 'password';
        icon.classList.remove('bi-eye-slash');
        icon.classList.add('bi-eye');
      }
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
      updateCartBadge();
      
      // Add form submit handler
      document.getElementById('auth-form').addEventListener('submit', handleAuthSubmit);
      
      // Add password toggle handler
      document.getElementById('toggle-password').addEventListener('click', togglePasswordVisibility);
      
      // Social login handlers (demo)
      document.getElementById('google-login').addEventListener('click', () => {
        alert(`${isLoginMode ? 'Login' : 'Sign up'} with Google (Demo mode)`);
      });
      
      document.getElementById('facebook-login').addEventListener('click', () => {
        alert(`${isLoginMode ? 'Login' : 'Sign up'} with Facebook (Demo mode)`);
      });
    });
  </script>
</body>
</html>